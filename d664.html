<!DOCTYPE HTML>
<html>
<head><title>Roland664</title></head>
<body/>
<script type="text/javascript" src="jcpc.js"></script>
<script type="text/javascript" src="j664.js"></script>
<script type="text/javascript" src="screen1.js"></script>
<script type="text/javascript" src="out664s1.js"></script>
<script type="text/javascript" src="ay.js"></script>
<script type="text/javascript" src="z80p.js"></script>
<script type="text/javascript" src="fdc.js"></script>
<script type="text/javascript" src="debug.js"></script>
<script type="text/javascript">ie=0</script>
<!--[if IE]>
<script type="text/javascript">ie=1</script>
<script type="text/vbscript" src="ie.vbscript"></script>
<![endif]-->
<script type="text/javascript">
param= game=t=u=0;
function cb(b,f){
  if(f[0]=='_')
    emul=b;
  else
    game=b;
  if(!t--){
    document.body.style.margin= 0;
    pt= document.createElement('select');
    pt.setAttribute('onchange','tapep=this.value;tapei=this.selectedIndex');
    cu= document.createElement('div');
    cu.setAttribute('style','overflow-y:auto;background:#fff;opacity:0.9;padding:0 5px');
    cu.innerHTML='F1: pause/help<br/>'+
        'F2: toggle joystick/cursors<br/>'+
        'F3: save quick snapshot<br/>'+
        'F4: load quick snapshot (also works in other session)<br/>'+
        'F5: reload (browser refresh)<br/>'+
        'F7: change pallete (color, grayscale, green)<br/>'+
        'F8: reset machine<br/>'+
        'F9: toggle bilinear/nearest neighbor scaling (Firefox only)<br/>'+
        'F10: save snapshot to local file (only Chrome)<br/>'+
        'F11: toggle fullscreen<br/>'+
        'F12: toggle sound (Firefox and Chrome)<br/><br/>'+
        '<a href="//roland.antoniovillena.es" target="_blank">Roland</a> version 20110702 by <a href="//antoniovillena.es" target="_blank">Antonio Villena</a><br/>'+
        'GPLv3 licensed, source code available at <a href="//emuscriptoria.svn.sourceforge.net/viewvc/emuscriptoria" target="_blank">Emuscriptoria</a>';
    dv= document.createElement('div');
    dv.setAttribute('style','display:none;position:absolute');
    dv.appendChild(pt);
    dv.appendChild(cu);
    he= document.createElement('canvas');
    he.width= 512;
    he.height= 384;
    he.setAttribute('style','display:none;position:absolute');
    eld= (elm= (ct= he.getContext('2d')).getImageData(0,0,512,384)).data;
    ir= document.createElement('iframe');
    ir.setAttribute('style','display:none');
    document.body.appendChild(ir);
    while(t<98303)
      a= emul.charCodeAt(++t+21) >> 4,
      eld[u++]= emul.charCodeAt(3*a) & 255,
      eld[u++]= emul.charCodeAt(3*a+1) & 255,
      eld[u++]= emul.charCodeAt(3*a+2) & 255,
      eld[u++]= a ? 255 : 55,
      a= emul.charCodeAt(t+21) & 15,
      eld[u++]= emul.charCodeAt(3*a) & 255,
      eld[u++]= emul.charCodeAt(3*a+1) & 255,
      eld[u++]= emul.charCodeAt(3*a+2) & 255,
      eld[u++]= a ? 255 : 55;
    ct.putImageData(elm, 0, 0);
    cv= document.createElement('canvas');
    document.body.appendChild(cv);
    document.body.appendChild(he);
    document.body.appendChild(dv);
    eld= (elm= (ct= cv.getContext('2d')).getImageData(0,0,1,1)).data;
    init();
  }
}
function ajax(f,a){
  var xhr=new XMLHttpRequest();
  xhr.onreadystatechange=function(){
    if(xhr&&xhr.readyState==4)
      a(  ie
          ? String.fromCharCode.apply(undefined, bin2arr(xhr.responseBody).toArray())
          : xhr.responseText, f);
  };
  xhr.open('GET',f,true);
  if (!ie)
    xhr.overrideMimeType('text/plain;charset=x-user-defined');
  xhr.send(null);
}
k=location.href.indexOf('?')+1;
if(k)
  l=location.href.substr(k).indexOf('/'),
  param= decodeURI(location.href.substr(k+l+1)),
  t++,
  ajax(location.href.substr(k,l),cb);
ajax('_664',cb);
</script>
</html>